{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "title": "Albert's Blog", "subTitle": "My personal website https://albert6.com", "avatarUrl": "https://avatars.githubusercontent.com/u/11675650?v=4", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/Kubernetes developer notes.html", "labels": ["documentation"], "postTitle": "Kubernetes developer notes", "postUrl": "post/Kubernetes%20developer%20notes.html", "postSourceUrl": "https://github.com/pospospos2007/pospospos2007.github.io/issues/1", "commentNum": 0, "wordCount": 3635, "description": "Cheetsheet\r\nhttps://kubernetes.io/docs/reference/kubectl/cheatsheet/ \r\n \r\n kubectl get nodes -o wide\r\n\r\nLogin Azure cluster\r\naz aks get-credentials --resource-group myResourceGroup --name myAKSCluster\r\n \r\n \r\nkubectl get nodes\r\nkubectl get services  \r\nkubectl apply -f azure-vote.yaml\r\nkubectl get service azure-vote-front --watch\r\nkubectl get secret\r\nkubectl expose deployment deployment-name --type=LoadBalancer --name=my-service-name\r\n https://kubernetes.io/docs/tutorials/stateless-application/expose-external-ip-address/\r\n \r\nkubectl get secrets     \r\nkubectl describe secret/db-credentials-c2hd54k784     \r\n \r\n\r\n\r\naccess the pod\u2019s bash shell:\r\nkubectl exec -it [pod] -- /bin/bash\r\n \r\nGet pod's logs:\r\nkubectl logs -f  pinot-zookeeper-0 --namespace=pinot-quickstart \r\n \r\n \r\nConfimap:\r\nkubectl get configmaps\r\nkubectl describe configmaps configmap-name\r\n \r\n# Create the configmap from file\r\nkubectl create configmap game-config --from-file=configure-pod-container/configmap/\r\nApply configmap yml:\r\n kubectl apply -k .\r\n \r\n \r\nkubectl apply -f azure-vote.yaml\r\n \r\nkubectl get pods --namespace=<insert-namespace-name-here>\r\n \r\nFixing terminating status\r\nkubectl patch pv jhooq-pv -p '{'metadata':{'finalizers':null}}'\r\nkubectl patch pvc jhooq-pv-claim -p '{'metadata':{'finalizers':null}}'\r\n \r\n \r\nrestart the  pod:\r\nkubectl get pod pinot-controller-0 -n pinot-quickstart -o yaml | kubectl replace --force -f -\r\n \r\nCreate namespace\r\nkubectl create ns pinot  \r\n \r\nAdd domain dns name:\r\n(add it under annotations tag)con\r\n \r\nservice.beta.kubernetes.io/azure-dns-label-name: label_name\r\n \r\n \r\n \r\nkubectl apply -k .  --namespace=namespacename\r\nkubectl logs -f <pod name> --namespace=namespacename\r\nkubectl get pod <pod name> -n namespacename -o yaml | kubectl replace --force -f -\r\n \r\n \r\n \r\n \r\nkubectl describe configmaps confimapname --namespace=namespacename\r\n \r\n \r\n \r\n \r\n \r\nkubectl delete pod -n kube-system  -l k8s-app=kube-dns\r\n \r\n \r\nCreate tls lincese\r\n \r\nopenssl genrsa -out tls.key 2048\r\nopenssl req -new -key tls.key -out tls.csr\r\nopenssl x509 -req -days 365 -in tls.csr -signkey tls.key -out tls.crt\r\n \r\nInstall ingress\r\nhttps://platform9.com/learn/v1.0/tutorials/nginix-controller-via-yaml\r\n \r\nCaddy ingress\r\nhttps://markheath.net/post/simple-aks-https-with-caddy\r\nkubectl create namespace caddy-system\r\nsudo kubectl apply -f mycaddy.yaml \r\nkubectl apply -f caddyingress_hostname.yaml\r\nkubectl create secret  tls mycerts --key ./tls.key --cert ./tls.crt -n servicenamespacename\r\n\r\nDeleting all pods and ingress then add ingress with certs.\r\n\r\nFix error:\r\nfailed calling webhook 'validate.nginx.ingress.kubernetes.io': failed to call webhook: Post '[https://ingress-nginx-controller-admission.ingress-basic.svc:443/networking/v1/ingresses?timeout=10s](https://ingress-nginx-controller-admission.ingress-basic.svc/networking/v1/ingresses?timeout=10s)': service 'ingress-nginx-controller-admission' not found\r\n:\r\nkubectl delete -A ValidatingWebhookConfiguration ingress-nginx-admission\r\n\r\n\r\nPFX file to crt file\r\nhttps://ibm.com/docs/en/arl/9.7?topic=certification-extracting-certificate-keys-from-pfx-file\r\n\r\n\r\nSpark setup\r\nhttps://testdriven.io/blog/deploying-spark-on-kubernetes/\r\n\r\nHow to check space left of pod\r\nkubectl -n pinot exec pinot-zookeeper-0 -- df -ah\r\n\r\n\r\n\r\nRemove table from pinot with name like new\r\nChange the logging level for docker thingstack\r\n \r\nGet docker log file path - docker inspect --format='{{.LogPath}}' $INSTANCE_ID\r\nCommand to clear docker log - truncate -s 0 /home/document/path\r\n\r\n\r\nHow to run command inside the kubenetetes pod\r\n kubectl exec -it spark-master-59dd99bf6-j46p9 -- /bin/bash -c 'ls'\u3002", "top": 0, "createdAt": 1718869716, "style": "", "script": "", "ogImage": "https://avatars.githubusercontent.com/u/11675650?v=4", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "question": "#d876e3", "wontfix": "#ffffff"}, "displayTitle": "Albert's Blog", "faviconUrl": "https://avatars.githubusercontent.com/u/11675650?v=4", "ogImage": "https://avatars.githubusercontent.com/u/11675650?v=4", "homeUrl": "https://pospospos2007.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}